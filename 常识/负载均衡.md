# 负载均衡

> 负载均衡（Load Balance），意思是将负载（工作任务，访问请求）进行平衡、分摊到多台服务器上执行。

大型网站访问量大并发量高时，需要进行业务拆分及分布式部署，将应用拆分后部署到不同的机器上，实现大规模分布式系统。为了解决分布式应用访问统一入口问题，可以在集群前面增加`负载均衡`设备，实现流量分发。实现负载均衡可以有多种方式，如 DNS 负载均衡（域名解析多个 IP）和 `反向代理服务器`。

## 作用

主要用于提高网站并发量。假如服务器网卡可以支撑 10000 个并发请求，如果接收到请求就立即返回那实际并发数就是 10000，但是服务器收到请求后一般还要先执行多个业务逻辑（写日志，连接数据库增删改查等等）并不能做到立即返回，假设其中的某个业务逻辑最高支持到 1000 并发，那么本来能支持 10000 并发的服务器却只有 1000 的并发，这个时候就需要用反向代理服务器作负载均衡设备，然后再加 9 个服务器，由反向代理服务器统一接收请求然后再分发给 10 个服务器，这样就能实现了 10000 并发  。

## 反向代理

一般的代理为正向代理，正向代理隐藏了真实客户端，使真实客户端对服务器不可见。反向代理隐藏了真实的服务端，使真实的服务器对客户端不可见。`Ngnix` 支持反向代理，Java 程序中通常 Tomcat 配合 Ngnix 一起使用：

1. 动静态资源分离，所有动态资源的请求交给 Tomcat ，静态资源（css、javascript、img）的请求直接由 Ngnix 返回给浏览器，减轻了 Tomcat 的压力；
2. 负载均衡，通过 Nginx 的反向代理把请求通过算法分配给不同的 Tomcat 进行处理，提高了网站并发量。

![Ngnix](http://wx3.sinaimg.cn/large/9e6aadb3gy1fn8akht6ksj20hr064mxd.jpg)





