# 存储引擎

MySQL 5.5 以上默认数据库引擎为 InnoDB（之前为 MyISAM），InnoDB 基本上可以替代 MyISAM 引擎了，除非硬件资源有限且对并发没有要求时非关键应用时才考虑 MyISAM。

- 查看表的引擎：`SHOW CREATE TABLE student`
- 修改表的存储引擎：`ALTER TABLE student ENGINE=MYISAM `

|   特征   | MyISAM                                                       | InnoDB                                                       |
| :------: | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 存储结构 | 每个 MyISAM 在磁盘上存储成三个文件。第一个文件的名字以表的名字开始，扩展名指出文件类型。文件存储表定义（.frm）、数据文件（.MYD (MYData)）、索引文件（.MYI (MYIndex)） | 所有的表都保存在同一个数据文件中（也可能是多个文件，或者是独立的表空间文件），InnoDB 表的大小只受限于操作系统文件的大小（一般为2GB） |
| 存储空间 | 可被压缩，所需存储空间较小                                   | 需要更多的存储空间。                                         |
|   事务   | 执行速度快，不支持事务                                       | 支持事务                                                     |
| 全文索引 | 支持 FULLTEXT 类型的全文索引                                 | 支持 FULLTEXT 类型的全文索引（5.6以后）                      |
|    锁    | 只支持表级锁                                                 | 支持行级锁（只在 where 主键时有效），多用户并发性能高        |
|  表行数  | 保存有表的总行数，select count(*) from table 会直接取出出该值，加了 where 条件后 myisam 和 innodb 处理的方式相同 | 没有保存表的总行数，select count(*) from table 会遍历整个表，消耗很大 |
|   主键   | 允许没有任何索引和主键的表存在                               | 如果没有设定主键或者非空唯一索引，就会自动生成一个6字节的主键（用户不可见） |
|   外键   | 不支持                                                       | 支持                                                         |

